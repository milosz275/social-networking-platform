import{j as e,u as O,r as i,F as G,P as X,M,a as se,b as le,c as V,d as pe,e as ae,f as fe,g as xe,h as ge,i as je,k as ye,l as ve,m as we,n as Ce,B as ke,R as Ne,o as A,p as be}from"./vendor-BwNIOYi8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const q=()=>{const t=document.cookie.split(";");for(let s=0;s<t.length;s++){const n=t[s],o=n.indexOf("="),r=o>-1?n.substr(0,o):n;(r!=="darkmode"||r!=="X-CSRFToken")&&(document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}console.log("All cookies have been deleted")},P=t=>{let s=null;if(document.cookie&&document.cookie!==""){let n=document.cookie.split(";");for(let o=0;o<n.length;o++){let r=n[o].trim();if(r.substring(0,t.length+1)===t+"="){s=decodeURIComponent(r.substring(t.length+1));break}}}return s},I=(t,s,n={})=>{if(!t||/^(?:\s|%20)+$/.test(t)){console.error("Invalid cookie name");return}let o=`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;n.expires instanceof Date&&(o+=`; expires=${n.expires.toUTCString()}`),n.path&&(o+=`; path=${n.path}`),n.domain&&(o+=`; domain=${n.domain}`),n.secure&&(o+="; secure"),n.samesite&&(o+=`; samesite=${n.samesite}`),document.cookie=o},y=async(t,s,n=null,o=!0)=>{const r=P("X-CSRFToken"),a=P("access");try{const l=new Headers;return o&&l.append("Content-Type","application/json"),l.append("X-CSRFToken",r),a&&l.append("Authorization",`Bearer ${a}`),n?await fetch(t,{method:s,headers:l,body:n}):await fetch(t,{method:s,headers:l})}catch(l){console.log("Error during ${method} api call: ",l)}return null},B=async(t,s)=>{try{const n=await t.json();return s.map(r=>Object.prototype.hasOwnProperty.call(n,r)?n[r]:(console.log(`Field "${r}" not found in the response.`),null))}catch(n){return console.log("Error parsing JSON response: ",n),null}},te=async(t,s)=>{var n=Promise.resolve(t.json());n.then(o=>!!JSON.stringify(o.detail).includes(s)).catch(o=>(console.error("Error fetching or processing data:",o),!1))};let ce="";ce="http://localhost:8000";const z=ce,Se=`${z}/user/login/`,Re=`${z}/user/register/`,Ee=`${z}/user/login/refresh/`,Pe=`${z}/admin`;let U="/social-networking-platform";const Q=U+"/",ne=U+"/main",_=U+"/login",re=U+"/register",oe=U+"/terms",De=U+"/debug",Te=U+"/admin",Le=U+"/chat",Y=async()=>{let t=!1,s=null;const n=P("refresh");if(!n){console.log("Refresh token empty");return}try{s=await y(Ee,"POST",JSON.stringify({refresh:n}))}catch(o){console.log("Error awaiting post: ",o)}if(s)if(s.ok){console.log("Successful refresh");const r=(await B(s,["access"]))[0];r?(I("access",r),t=!0,console.log("New access set")):console.log("New access token missing")}else console.log("Unsuccessful refresh"),te(s,"token_not_valid")&&q();else console.log("Server not responding");return t},K=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},E=({tabIndex:t="0",value:s="",className:n="inputButton",type:o="button",onClick:r=""})=>e.jsx("input",{tabIndex:t,className:n,type:o,onClick:r,value:s}),Z=({parentClass:t="inputContainerButtons",tabIndex:s="0",value1:n="",value2:o="",className1:r="inputButtonAlternative",className2:a="inputButton",type1:l="button",type2:g="submit",onClick1:u="",onClick2:f=""})=>e.jsxs("div",{className:t,children:[e.jsx(E,{tabIndex:s,className:r,type:l,onClick:u,value:n}),e.jsx(E,{tabIndex:s,className:a,type:g,onClick:f,value:o})]}),Ae=()=>{const t=O(),[s,n]=i.useState(""),[o,r]=i.useState(""),a=()=>{s&&(n(!1),q()),t(_)},l=u=>{u.key==="Enter"&&(K(),a())},g=async()=>{let u=P("username");u&&r(u),await Y()&&t(ne)};return i.useEffect(()=>{g()},[]),e.jsx("div",{className:"Home",onKeyDown:l,children:e.jsxs("div",{className:"mainContainer",children:[e.jsx("div",{className:"titleContainer prevent-select",children:e.jsx("h1",{children:"Welcome to ziomki.online!"})}),e.jsx("div",{className:"subtitleContainer prevent-select",children:"Hi Ziomkis! ðŸ‘‹"}),e.jsx("div",{className:"buttons",children:e.jsx(Z,{onClick1:()=>t(oe),onClick2:a,value1:"Terms",value2:"Begin now!"})}),e.jsx("div",{className:"buttonContainer",children:s?e.jsx("div",{className:"emailContainer",children:o!==""?`Logged in as ${o}`:"Logged in"}):e.jsx("div",{})})]})})},de=({parentClass:t="inputContainerText",tabIndex:s="0",value:n="",className:o="inputBox",type:r="text",placeholder:a="",onChange:l="",onKeyDown:g="",error:u="",autoComplete:f="username",onFocus:c=()=>{}})=>e.jsxs("div",{className:t,children:[e.jsx("input",{tabIndex:s,value:n,className:o,type:r,placeholder:a,onChange:l,onKeyDown:g,autoComplete:f,onFocus:c}),e.jsx("label",{className:"errorLabel",children:u})]}),ee=({parentClass:t="inputContainerText",tabIndex:s="0",value:n="",className:o="inputBox",placeholder:r="",onChange:a=()=>{},onKeyDown:l=()=>{},error:g="",onFocus:u=()=>{}})=>{const[f,c]=i.useState(!1),x=()=>{c(!f)},j=v=>{v.preventDefault()};return e.jsxs("div",{className:t,children:[e.jsxs("div",{className:"inputBoxBack",children:[e.jsx("input",{tabIndex:s,value:n,className:o,type:f?"text":"password",placeholder:r,onChange:a,onKeyDown:l,autoComplete:"password",onFocus:u,onSelectCapture:v=>j(v)}),e.jsx("i",{className:"inputIcon prevent-select",onClick:x,children:f?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),e.jsx("label",{className:"errorLabel",children:g})]})},Fe=()=>{const t=O(),[s,n]=i.useState(""),[o,r]=i.useState(""),[a,l]=i.useState(""),[g,u]=i.useState(""),[f,c]=i.useState(""),x=m=>{m.key==="Enter"&&(K(),v())},j=async()=>{let m=P("username");return m?(n(m),m):null},v=async()=>{if(l(""),u(""),c(""),s===""){l("Please enter your username"),console.log("Login: No username entered");return}else if(o===""){u("Please enter a password"),console.log("Login: No password entered");return}let m=null;try{m=await y(Se,"POST",JSON.stringify({username:s,password:o}))}catch(w){console.log("Error awaiting post: ",w)}if(m)if(m.ok){const w=await B(m,["access","refresh"]);console.log(w);const N=w[0],S=w[1];if(N)I("access",N),I("refresh",S),console.log("Successfully logged in"),I("username",s),t(ne);else{console.log("Access token not returned"),c("Couldn't retrieve access token");return}}else if(te(m,"No active account found with the given credentials")){c("No active account found with the given credentials");return}else{c("Unknown error");return}else{c("Server not responding");return}};return e.jsx("div",{className:"Login",children:e.jsx("div",{className:"mainContainer",children:e.jsxs("div",{className:"cardContainer",children:[e.jsx("div",{className:"titleContainer prevent-select",children:"> Login"}),e.jsxs("form",{children:[e.jsx(de,{value:s,placeholder:"Enter your email here",onChange:m=>n(m.target.value),onKeyDown:m=>x(m),onFocus:()=>j(),error:a}),e.jsx(ee,{value:o,placeholder:"Enter your password here",onChange:m=>r(m.target.value),onKeyDown:m=>x(m),error:g})]}),e.jsx(Z,{onClick1:()=>t(re),onClick2:v,value1:"Register",value2:"Log in"}),e.jsx("label",{className:"errorLabel",children:f})]})})})},Ie=async(t,s,n,o,r,a)=>{if(o(""),r(""),a(""),t==="")return o("Please enter your username"),console.log("Register: No username entered"),!1;if(s==="")return r("Please enter a password"),console.log("Register: No password entered"),!1;if(s.length<=7)return r("The password must be 8 characters or longer"),console.log("Register: To short password entered"),!1;if(/\d/.test(s))if(/[A-Z]/.test(s))if(/[a-z]/.test(s))if(/[^A-Za-z0-9]/.test(s)){if(n!==s)return a("Passwords must be identical"),console.log("Register: Different confirm password entered"),!1}else return r("The password must contain at least one special character"),console.log("Register: Password doesn't contain at least one special character"),!1;else return r("The password must contain at least one small letter"),console.log("Register: Password doesn't contain at least one small letter"),!1;else return r("The password must contain at least one capital letter"),console.log("Register: Password doesn't contain at least one capital letter"),!1;else return r("The password must contain at least one digit"),console.log("Register: Password doesn't contain at least one digit"),!1;return!0},Be=()=>{const t=O(),[s,n]=i.useState(""),[o,r]=i.useState(""),[a,l]=i.useState(""),[g,u]=i.useState(""),[f,c]=i.useState(""),[x,j]=i.useState(""),[v,m]=i.useState(""),[w,N]=i.useState(!1),S=p=>{p.key==="Enter"&&(K(),C())},T=()=>{N(!w),r(o),l(a)},C=async()=>{if(m(""),!await Ie(s,o,a,u,c,j))return;let k=null;try{k=await y(Re,"POST",JSON.stringify({username:s,password:o}))}catch(D){console.log("Error awaiting post: ",D)}if(k)if(k.ok)console.log("Account successfully created"),I("username",s),t(_);else if(te(k,"A user with that username already exists.")){m("An account with that username already exists");return}else{m("Unknown error");return}else{m("Server not responding");return}};return e.jsx("div",{className:"Register",children:e.jsx("div",{className:"mainContainer",children:e.jsxs("div",{className:"cardContainer",children:[e.jsx("div",{className:"titleContainer prevent-select",children:"> Register"}),e.jsxs("form",{children:[e.jsx(de,{value:s,placeholder:"Enter your username here",onChange:p=>n(p.target.value),onKeyDown:p=>S(p),error:g}),e.jsx(ee,{value:o,placeholder:"Enter your password here",showPassword:w,onTogglePassword:()=>T(),onChange:p=>r(p.target.value),onKeyDown:p=>S(p),autocomplete:"new-password",error:f}),e.jsx(ee,{value:a,placeholder:"Confirm your password here",showPassword:w,onTogglePassword:()=>T(),onChange:p=>l(p.target.value),onKeyDown:p=>S(p),autocomplete:"new-password",error:x})]}),e.jsx(Z,{onClick1:()=>t(_),onClick2:C,value1:"Log in",value2:"Register"}),e.jsx("label",{className:"errorLabel center-text",children:v})]})})})},_e=()=>e.jsx("div",{className:"Chat"}),Ue=()=>e.jsx("div",{className:"Terms",children:e.jsx("div",{className:"mainContainer",children:e.jsx("div",{className:"textContainer",children:e.jsx("p",{children:" 1. Don't offend Mr. Elon Musk "})})})}),Oe=()=>{let t=P("darkmode");return t==null||t==null?(I("darkmode","false"),!1):t=="true"},ie=t=>{let s=Oe();if(s==t){console.log("Attempting to set the same darkmode value");return}s?I("darkmode","false"):I("darkmode","true"),console.log("Darkmode toggled")},$e=()=>{const t=O(),[s,n]=i.useState(""),o=()=>{s&&(n(!1),q()),t(_)},r=c=>{c.key==="Enter"&&(K(),o())},a=async()=>{const c=P("access");console.log("access: ",c);const x=P("refresh");console.log("refresh token: ",x);const j=P("darkmode");console.log("darkmode: ",j)},l=async()=>{ie(),await Y()},g=async()=>{await y(z+"/posts/create","POST",JSON.stringify({content:"string",privacy:1}))},u=async()=>{await y(z+"/posts/1/comment/create","POST",JSON.stringify({content:"string"}))},f=async()=>{let c=null;try{c=await y("http://localhost:8000/user/current/","GET")}catch(x){console.log("Error awaiting get: ",x)}if(c){if(c.ok){const x=await B(c,["id","username"]),j=x[0],v=x[1];console.log("id: ",j),console.log("username: ",v)}}else{console.log("Server not responding");return}};return e.jsx("div",{className:"Debug",onKeyDown:r,children:e.jsxs("div",{className:"mainContainer",children:[e.jsx("div",{className:"titleContainer prevent-select",children:e.jsx("h1",{children:"Welcome to ziomki.online!"})}),e.jsx("div",{className:"buttons",children:e.jsx(Z,{onClick1:()=>t(oe),onClick2:o,value1:"Terms",value2:"Begin now!"})}),e.jsxs("div",{className:"buttonContainer",children:[e.jsx("h3",{children:" Debug section "}),e.jsx(E,{className:"debugButton",onClick:a,value:"Log token"}),e.jsx(E,{className:"debugButton",onClick:q,value:"Delete all cookies"}),e.jsx(E,{className:"debugButton",onClick:ie,value:"Toggle darkmode"}),e.jsx(E,{className:"debugButton",onClick:l,value:"Refresh token"}),e.jsx(E,{className:"debugButton",onClick:g,value:"Create post"}),e.jsx(E,{className:"debugButton",onClick:u,value:"Comment post"}),e.jsx(E,{className:"debugButton",onClick:f,value:"Get user data"})]})]})})},Me=()=>{const t=O(),s=n=>{n.key==="Enter"&&(K(),t(Q))};return e.jsx("div",{className:"ErrorPage",onKeyDown:n=>s(n),children:e.jsx("div",{className:"mainContainer",children:e.jsxs("div",{className:"cardContainer",children:[e.jsx("div",{className:"titleContainer prevent-select",children:"> This page does not exist"}),e.jsxs("div",{className:"inputContainerButtons",children:[e.jsx(E,{className:"inputButton",onClick:()=>t(Q),onKeyDown:n=>s(n),value:"Main Page"}),e.jsx(E,{className:"inputButton",onClick:()=>t(_),onKeyDown:n=>s(n),value:"Login"}),e.jsx(E,{className:"inputButton",onClick:()=>t(re),onKeyDown:n=>s(n),value:"Register"})]})]})})})},ze=()=>(window.onload=function(){window.location.href=Pe},e.jsx("div",{className:"Admin"})),$=async(t,s=!1)=>{const n=P("csrftoken"),o=P("access");try{const r=new Headers;r.append("X-CSRFToken",n),s&&o&&r.append("Authorization",`Bearer ${o}`);const a=await fetch(t,{method:"GET",headers:r});if(!a.ok)throw new Error(`HTTP error! Status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error during GET request: ",r),r}},He=({onMyProfileResults:t})=>{const[s,n]=i.useState([]),[o,r]=i.useState(!0),[a,l]=i.useState(!0),[g,u]=i.useState(!1),[f,c]=i.useState(null),x=i.useRef(null),[j,v]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const p=await y("http://localhost:8000/user/current/","GET"),k=await B(p,["id","description","birth","image_url","username","friends"]);n(k),r(!1)}catch(p){console.error("Error:",p),r(!1)}})()},[]);const m=()=>{o||l(!1)},w=()=>{l(!0)},N=C=>{t(C)},S=()=>{u(!0)},T=async C=>{if(C.preventDefault(),x.current){let p=new FormData(x.current);if(j){p.set("remove_image",!0);const k=new Blob([""],{type:"image/jpeg"});p.append("image",k,"")}else p.get("image").size===0&&p.delete("image");p.get("birth")||p.delete("birth");try{await y(`http://localhost:8000/user/update/${s[0]}`,"PATCH",p,!1),u(!1);const k=await y("http://localhost:8000/user/current/","GET"),D=await B(k,["id","description","birth","image_url","username","friends"]);n(D),r(!1)}catch(k){r(!1),c(k.message)}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-profile-container",children:[e.jsxs("div",{className:"my-profile-info",children:[e.jsx("div",{className:"my-profile-image",children:s[3]?e.jsx("img",{src:s[3],alt:"User Avatar"}):e.jsx(G,{className:"my-profile-default-avatar"})}),e.jsxs("div",{className:"my-profile-details",children:[e.jsx("h2",{className:"my-profile-username",children:s[4]}),e.jsxs("p",{children:["Date of Birth: ",s[2]]}),e.jsxs("div",{className:"my-profile-buttons-container",children:[e.jsx("div",{className:"my-profile-button-packer",children:e.jsx("div",{className:"my-profile-button",onClick:S,children:"Change Data"})}),e.jsx("div",{className:"my-profile-button-packer",children:e.jsx("div",{className:"my-profile-button",onClick:a?m:w,children:o?e.jsx("span",{children:"Loading..."}):e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:["You have ",s[5]?s[5].length:0," ",s[5]&&s[5].length===1?"friend":"friends"]}):e.jsx(e.Fragment,{children:"Description"})})})})]})]})]}),e.jsx("div",{children:a?e.jsx(e.Fragment,{children:e.jsx(X,{children:e.jsxs("p",{className:"my-profile-description",children:["About me: ",s[1]]})})}):e.jsxs("div",{children:[e.jsx("h2",{children:"Friends"}),e.jsx(X,{children:e.jsx("div",{className:"my-profile-users-container",children:s[5].map(C=>e.jsxs("div",{className:"my-profile-user-item",onClick:()=>N(C.id),children:[C.image_url?e.jsx("img",{src:C.image_url,alt:"image",className:"my-profile-user-avatar"}):e.jsx(G,{className:"my-profile-friend-default-avatar"}),e.jsx("p",{className:"my-profile-username",children:C.username})]},C.id))})})]})})]}),e.jsx(M,{isOpen:f!==null,onRequestClose:()=>c(null),ariaHideApp:!1,children:e.jsxs("div",{children:[e.jsx("h2",{children:"Error!"}),e.jsx("p",{children:f}),e.jsx("button",{onClick:()=>c(null),children:"Close"})]})}),g&&e.jsxs(M,{isOpen:g,onRequestClose:()=>u(!1),style:{content:{width:"500px",margin:"auto",height:"400px",backgroundColor:"#f0f0f0",borderRadius:"10px",overflow:"hidden"}},ariaHideApp:!1,children:[e.jsx("div",{className:"modal-header",children:e.jsx("div",{onClick:()=>u(!1),children:e.jsx(se,{style:{cursor:"pointer"}})})}),e.jsxs("form",{ref:x,onSubmit:T,style:{textAlign:"center",height:"95%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("textarea",{name:"description",placeholder:"About me...",style:{width:"100%",minHeight:"130px",borderRadius:"10px",marginBottom:"10px"},maxLength:500,required:!0,defaultValue:s[1]}),e.jsx("input",{type:"date",name:"birth",id:"birth",style:{padding:"8px",borderRadius:"5px",border:"1px solid #ccc",marginBottom:"10px",width:"100%",boxSizing:"border-box"}}),j?e.jsx(e.Fragment,{}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",children:"Change profile picture"}),e.jsx("input",{type:"file",name:"image",required:!1,accept:".png, .jpg",style:{border:"5px",padding:"5px",backgroundColor:"#f0f0f0",width:"100%",cursor:"pointer"}})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"removeImage",name:"removeImage",checked:j,onChange:C=>v(C.target.checked)}),e.jsx("label",{htmlFor:"removeImage",children:"Remove current image"})]}),e.jsx("button",{type:"submit",style:{width:"40%",borderRadius:"20px",backgroundColor:"purple",color:"#fff",padding:"10px 0",marginLeft:"30%",cursor:"pointer"},children:"Change user data"})]})]})]})},Ge=({data:t,onNotificationResultsUser:s})=>{const n=t,[o,r]=i.useState(!1),a=f=>{s(f)},l=()=>{switch(n.notification_type){case"friend_request":return e.jsxs(e.Fragment,{children:["User",e.jsxs("span",{className:"notification-user-name",onClick:()=>a(n.from_user.id),children:[" ",n.from_user.username]})," sent you a friend request."]});case"post_like":return`User ${n.from_user.username} liked your post.`;case"post_comment":return`User ${n.from_user.username} commented on your post.`;default:return""}},g=()=>{switch(n.notification_type){case"friend_request":return e.jsx(pe,{});case"post_like":return e.jsx(V,{});case"post_comment":return e.jsx(le,{});default:return null}},u=async()=>{try{await y(`http://localhost:8000/user/notification/${n.id}/accept`,"PATCH"),r(!0)}catch(f){console.error("Error :",f)}};return n.from_user.id!==n.to_user.id&&e.jsxs("div",{className:"notification-container",children:[e.jsx("div",{className:"notification-icon",children:g()}),e.jsxs("div",{className:"notification-content",children:[e.jsx("p",{className:"notification-text",children:l()}),n.notification_type==="friend_request"&&!o&&e.jsx("button",{className:"accept-friend-request-button",onClick:u,children:"Accept"}),o&&e.jsx("span",{className:"accepted-text",children:"Accepted"})]})]})},qe=({data:t,onDelete:s})=>{const[n,o]=i.useState(!1),[r,a]=i.useState(!1),[l,g]=i.useState(!1),[u,f]=i.useState([]),[c,x]=i.useState(""),[j,v]=i.useState(null),[m,w]=i.useState(!1),[N,S]=i.useState(),[T,C]=i.useState(),[p,k]=i.useState(!1),D=async()=>{await Y()||O()},J=async()=>{try{let h=await y("http://localhost:8000/user/current/","GET"),F=(await B(h,["id"]))[0];v(F)}catch(h){console.error("Error getting user ID:",h)}},W=async()=>{k(!1);try{const h=t.id;await D(),await y(`http://localhost:8000/posts/${h}/report`,"POST")}catch(h){console.error("Error reporting post:",h)}};i.useEffect(()=>{(async()=>{try{await J(),w(t.likes.includes(j)),S(t.likes_count),C(t.comments_count)}catch(L){console.error("Error fetching data:",L)}})()},[t,j]);const H=async()=>{await D(),m?(await y(`http://localhost:8000/posts/${t.id}/unlike`,"PUT"),w(!1),S(N-1)):(await y(`http://localhost:8000/posts/${t.id}/like`,"PUT"),w(!0),S(N+1))},d=async()=>{try{const h=t.id,L=await $(`http://localhost:8000/posts/${h}/comments`);f(L),g(!l)}catch(h){console.error("Error getting comments:",h)}},b=()=>{g(!1)},R=async()=>{try{console.log("komentarze1: ",u),await D();const h=t.id,L=await y(`http://localhost:8000/posts/${h}/comment/create`,"POST",JSON.stringify({content:c})),F=await B(L,["id","content","timestamp","username"]);C(T+1);const he={id:F[0],content:F[1],timestamp:F[2],username:F[3]};f(me=>[...me,he]),x(""),console.log("komentarze2: ",u)}catch(h){console.error("BÅ‚Ä…d podczas dodawania komentarza:",h)}},ue=async h=>{try{await D(),await y(`http://localhost:8000/posts/${t.id}/comments/${h}/delete`,"DELETE"),f(L=>L.filter(F=>F.id!==h)),C(T-1)}catch(L){console.error("Error deleting comment:",L)}};return e.jsxs("div",{className:"post-container",children:[e.jsxs("div",{style:{marginLeft:"95%",justifyContent:"space-between",alignItems:"center"},children:[t.author===j&&e.jsx(ae,{onClick:()=>s(t.id),style:{cursor:"pointer"}}),t.author!==j&&e.jsx(fe,{onClick:()=>k(!0),style:{cursor:"pointer"}})]}),e.jsxs("p",{children:["Author: ",t.author_username]}),e.jsx("span",{style:{fontSize:"20px",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:t.content}),t.media&&e.jsx("img",{src:t.media,alt:"Post Media",style:{width:"100%",maxWidth:"500px"}}),e.jsxs("div",{className:"actions",children:[e.jsxs("p",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:H,className:`like ${n?"hovered":""}`,children:[N," ",e.jsx("span",{style:{display:"flex",marginLeft:"10px"},children:m?e.jsx(V,{style:{color:"purple"},onClick:H}):e.jsx(V,{onClick:H})})]}),e.jsxs("p",{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onClick:d,className:`comment ${r?"hovered":""}`,children:[T,e.jsx("span",{style:{display:"flex",marginLeft:"10px"},children:e.jsx(le,{})})]})]}),p&&e.jsxs(M,{isOpen:p,style:{content:{width:"30%",height:"20%",margin:"auto",backgroundColor:"#fff",borderRadius:"5px",padding:"20px",display:"flex",flexDirection:"column"}},ariaHideApp:!1,children:[e.jsx("h2",{children:"Do you want to report that post?"}),e.jsxs("div",{children:[e.jsx("button",{onClick:W,style:{width:"20%",marginRight:"30%",marginLeft:"15%"},children:"Yes"}),e.jsx("button",{onClick:()=>k(!1),style:{width:"20%"},children:"No"})]})]}),l&&e.jsx("div",{className:"comments-window",children:l&&e.jsxs(M,{isOpen:l,onRequestClose:b,contentLabel:"Comments Modal",style:{content:{width:"600px",margin:"auto",backgroundColor:"#f0f0f0",borderRadius:"10px",overflow:"hidden"}},ariaHideApp:!1,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{onClick:b,children:e.jsx(se,{style:{cursor:"pointer"}})}),e.jsx("h3",{children:"Comments"}),e.jsx("hr",{style:{margin:"10px 0",border:"0.5px solid #ccc"}})]}),e.jsx("div",{className:"comments-window",children:Array.isArray(u)&&u.map(h=>e.jsxs("div",{className:"comment-item",children:[h&&h.username&&e.jsxs("p",{children:[h.username,":"]}),h&&h.content&&e.jsx("p",{children:h.content}),h&&h.timestamp&&e.jsx("p",{children:h.timestamp}),h&&h.username===P("username")&&e.jsx(ae,{onClick:()=>ue(h.id),style:{cursor:"pointer"}}),e.jsx("hr",{style:{margin:"10px 0",border:"0.5px solid #ccc"}})]},h==null?void 0:h.id))}),e.jsxs("div",{className:"comment-input-container",children:[e.jsx("input",{type:"text",value:c,onChange:h=>x(h.target.value),placeholder:"Your comment",onKeyDown:h=>h.key==="Enter"&&R()}),e.jsx(xe,{style:{marginLeft:"15px",cursor:"pointer"},onClick:R})]})]})})]})},Ke=({onUserFinderResults:t})=>{const[s,n]=i.useState(""),[o,r]=i.useState([]),[a,l]=i.useState(null),g=async c=>{if(c.key==="Enter")try{const x=await y("http://localhost:8000/user/current/","GET"),v=await(await y(`http://localhost:8000/user/search/?username=${s}`,"GET")).json(),m=await x.json();r(v),r(v.filter(w=>w.id!==m.id))}catch(x){l("Error searching for users. Please try again later."),console.error("Error searching for users:",x)}},u=c=>{n(c.target.value)},f=c=>{t(c)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"finder-search-input-container",children:e.jsx("input",{type:"text",value:s,onChange:u,onKeyDown:g,placeholder:"Type username and press Enter...",className:"finder-search-input"})}),a&&e.jsx("div",{className:"error-message",children:a}),e.jsx(X,{children:e.jsx("div",{className:"finder-users-container",children:o.map(c=>e.jsxs("div",{className:"finder-user-item",onClick:()=>f(c.id),children:[c.image_url?e.jsx("img",{src:c.image_url,alt:"image",className:"finder-user-avatar"}):e.jsx(G,{className:"finder-default-avatar"}),e.jsx("p",{className:"finder-username",children:c.username})]},c.id))})})]})},Je=({data:t})=>{const[s,n]=i.useState(!1),[o,r]=i.useState(!1);(async()=>{try{const u=await y("http://localhost:8000/user/current/","GET"),j=(await B(u,["friends"])).flat().map(v=>v.id).includes(t.id);r(j)}catch(u){console.error("Error:",u)}})();const l=async()=>{try{await y(`http://localhost:8000/user/add/${t.id}`,"PUT")}catch(u){console.error("Error :",u)}},g=async()=>{try{await y(`http://localhost:8000/user/remove/${t.id}`,"PATCH"),r(!1)}catch(u){console.error("Error :",u)}n(!1)};return e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-info",children:[e.jsx("div",{className:"profile-image",children:t.image_url?e.jsx("img",{src:t.image_url,alt:"User Avatar"}):e.jsx(G,{className:"profile-default-avatar"})}),e.jsxs("div",{className:"profile-details",children:[e.jsx("h2",{className:"profile-username",children:t.username}),e.jsxs("p",{children:["Date of Birth: ",t.birth]}),o?e.jsx("div",{className:"profile-friend-button",onClick:()=>n(!0),children:"Friend"}):e.jsx("button",{className:"profile-button",onClick:l,children:"Add Friend"})]})]}),e.jsx("div",{children:e.jsxs("p",{className:"profile-description",children:["About me: ",t.description]})}),s&&e.jsx("div",{className:"confirmation-modal",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("p",{children:"Are you sure you want to remove this user from your friends?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{className:"profile-button",onClick:g,children:"Yes"}),e.jsx("button",{className:"profile-button",onClick:()=>n(!1),children:"Cancel"})]})]})})]})};function We(){const t=O(),[s,n]=i.useState("posts"),[o,r]=i.useState([]),[a,l]=i.useState([]),[g,u]=i.useState([]),[f,c]=i.useState(null),[x,j]=i.useState(!1),[v,m]=i.useState(null),w=i.useRef(null),N=d=>{n(d)},S=d=>{c(d),n("profile")},T=async d=>{if(d.preventDefault(),w.current){let b=new FormData(w.current);try{await y("http://localhost:8000/posts/create","POST",b,!1),j(!1),$("http://localhost:8000/posts/explore").then(R=>{p(R.results),r(R.results)})}catch(R){console.log("dddd"),m(R.message)}}},C=async d=>{await y(`http://localhost:8000/posts/${d}/delete`,"DELETE"),r(b=>b.filter(R=>R.id!==d))};i.useEffect(()=>{s==="posts"&&$("http://localhost:8000/posts/explore").then(d=>{p(d.results),r(d.results)}).catch(d=>{console.error("Error getting data:",d)}),s==="friendsPosts"&&$("http://localhost:8000/posts/following",!0).then(d=>{console.log(d),p(d.results),r(d.results)}).catch(d=>{console.error("Error getting data:",d)}),s==="notifications"&&(async()=>{try{const R=await(await y("http://localhost:8000/user/notification/list","GET")).json();k(R),l(R)}catch(b){console.error("Error getting notifications:",b)}})(),s==="my_profile"&&(async()=>{try{D()}catch(b){console.error("Error:",b)}})(),s==="user_finder"&&$("http://localhost:8000/user/search/").then(d=>{W()}).catch(d=>{console.error("Error getting data:",d)}),s==="profile"&&$(`http://localhost:8000/user/${f}`).then(d=>{J(d),u(d)}).catch(d=>{console.error("Error getting data:",d)}),s==="logout"&&(q(),t(_))},[s]);const p=d=>e.jsx(e.Fragment,{children:d.map(b=>e.jsx("div",{children:e.jsx(qe,{data:b,onDelete:C})},b.id))}),k=d=>e.jsx(e.Fragment,{children:d.map(b=>e.jsx("div",{className:"notification-item",children:e.jsx(Ge,{data:b,onNotificationResultsUser:S})},b.id))}),D=()=>e.jsx(He,{onMyProfileResults:S}),J=d=>e.jsx(Je,{data:d}),W=()=>e.jsx(Ke,{onUserFinderResults:S}),H=async()=>{await Y()||t(_)};return i.useEffect(()=>{H()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"upBar",children:e.jsx("div",{className:"main-lable",children:e.jsx("h3",{children:"Ziomki.online"})})}),e.jsxs("div",{className:"leftBar",children:[e.jsx("div",{onClick:()=>N("my_profile"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(G,{size:32})," My Profile"]})}),e.jsx("div",{onClick:()=>N("posts"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(ge,{size:32})," Public Posts"]})}),e.jsx("div",{onClick:()=>N("friendsPosts"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(je,{size:32})," Friend's Posts"]})}),e.jsx("div",{onClick:()=>N("notifications"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(ye,{size:32})," Notifications"]})}),e.jsx("div",{onClick:()=>N("user_finder"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(ve,{size:32})," User Finder"]})}),e.jsx("div",{onClick:()=>N("logout"),className:"selectionDiv",children:e.jsxs("p",{style:{fontSize:"24px"},children:[e.jsx(we,{size:32})," Logout"]})})]}),e.jsxs("div",{className:"content",onWheel:d=>d.stopPropagation(),children:[s==="user_finder"&&W(),s==="my_profile"&&D(),e.jsxs(X,{children:[s==="profile"&&J(g),s==="notifications"&&(k([])?k(a):e.jsx("p",{children:"No notifications available."})),(s==="posts"||s==="friendsPosts")&&(p([])?p(o):e.jsx("p",{children:"No posts available."}))]})]}),e.jsx("div",{style:{textAlign:"left"},children:e.jsxs("div",{onClick:()=>j(d=>!d),style:{display:"inline-block",background:"rgba(255, 255, 255, 0.25)",position:"relative",padding:"10px",borderRadius:"8px",cursor:"pointer"},children:[e.jsx("div",{style:{marginLeft:"40px",width:"40px",height:"40px",borderRadius:"50%",background:"rgba(155, 0, 80, 0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"1"},children:e.jsx(Ce,{style:{fontSize:"24px",color:"white"}})}),e.jsx("div",{style:{marginTop:"10px",fontSize:"20px",fontWeight:"bold"},children:"Create post"})]})}),e.jsx(M,{isOpen:v!==null,onRequestClose:()=>m(null),ariaHideApp:!1,children:e.jsxs("div",{children:[e.jsx("h2",{children:"Error!"}),e.jsx("p",{children:v}),e.jsx("button",{onClick:()=>m(null),children:"Close"})]})}),x&&e.jsxs(M,{isOpen:x,onRequestClose:()=>j(!1),style:{content:{width:"500px",margin:"auto",height:"400px",backgroundColor:"#f0f0f0",borderRadius:"10px",overflow:"hidden"}},ariaHideApp:!1,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{onClick:()=>j(!1),children:e.jsx(se,{style:{cursor:"pointer"}})}),e.jsx("h3",{children:"Create Post"}),e.jsx("hr",{style:{margin:"10px 0",border:"0.5px solid #ccc"}})]}),e.jsxs("form",{ref:w,onSubmit:T,style:{textAlign:"center",height:"80%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsx("textarea",{name:"content",placeholder:"content",style:{width:"100%",minHeight:"130px",borderRadius:"10px",marginBottom:"10px"},maxLength:500,required:!0}),e.jsxs("select",{name:"privacy",id:"privacy",style:{padding:"8px",borderRadius:"5px",border:"1px solid #ccc",marginBottom:"10px"},children:[e.jsx("option",{value:"1",children:"Public"}),e.jsx("option",{value:"2",children:"Friends"})]}),e.jsx("input",{type:"file",name:"media",accept:".png, .jpg",style:{border:"none",padding:"5px",backgroundColor:"#f0f0f0",width:"100%",cursor:"pointer",marginBottom:"10px"}}),e.jsx("button",{type:"submit",style:{width:"40%",borderRadius:"20px",backgroundColor:"purple",color:"#fff",padding:"10px 0",marginTop:"10px",marginLeft:"30%",cursor:"pointer"},children:"Add Post"})]})]})]})}document.addEventListener("keydown",function(t){t.key==="s"&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.preventDefault()},!1);function Xe(){return e.jsx("div",{className:"App",children:e.jsx(ke,{children:e.jsxs(Ne,{children:[e.jsx(A,{path:Q,element:e.jsx(Ae,{})}),e.jsx(A,{path:_,element:e.jsx(Fe,{})}),e.jsx(A,{path:re,element:e.jsx(Be,{})}),e.jsx(A,{path:Le,element:e.jsx(_e,{})}),e.jsx(A,{path:oe,element:e.jsx(Ue,{})}),e.jsx(A,{path:De,element:e.jsx($e,{})}),e.jsx(A,{path:ne,element:e.jsx(We,{})}),e.jsx(A,{path:Te,element:e.jsx(ze,{})}),e.jsx(A,{path:"*",element:e.jsx(Me,{})})]})})})}be.createRoot(document.getElementById("root")).render(e.jsx(e.Fragment,{children:e.jsx(Xe,{})}));
